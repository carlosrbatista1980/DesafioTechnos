<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>
        TESTE DA API PARA A TECHNOS
    </title>

    <link rel="stylesheet" href="css/bootstrap.min.css" />
	<style type="text/css">
	#form1 {
		width: 53%;		
	}
	.list1 {
		float: left;
		margin: 2% 2% 0% 0%;
	}
    .float-container {
        border: 2px solid #fff;
        padding: 10px;
    }

    .float-child {
        width: 70%;
        float: left;
        padding: 10px;
        /* border: 2px solid red; */
    }
	.btn1 {
		float: left;
		margin: 6% 0% 0% 30%;
		width: 40%;
	}
</style>
</head>
<body>

<div class="container-fluid">
    <form class="container" id="form1">
		
			<div class="form-group">
				<label for="lblNome">Nome do produto</label>
				<input type="text" class="form-control" id="pNome" aria-describedby="emailHelp">            
			</div>
	
		
	
			<div class="form-group">
				<label for="lblCodigo">Codigo</label>
				<input type="text" class="form-control" id="pCodigo">
			</div>
	
		
			<div class="form-group">
				<label for="lblDescricao">Descricao</label>
				<input type="text" class="form-control" id="pDescricao">            
			</div>
		
			<div class="form-group">
				<label for="lblLancamento">Data de Lançamento</label>
				<input type="date" class="form-control" id="pLancamento">            
			</div>
			
			<div class="form-group">
				<label for="lblPreco">Preco</label>
				<input type="number" class="form-control" id="pPreco">            
			</div>		
			
			<div class="form-group">
				<label for="lblToken">Token</label>
				<input type="text" class="form-control" id="pToken" placeholder='cole o token recebido pelo metodo "GetToken(), consulte o swagger"'>
			</div>		
		
			<div class="form-group list1">			
					<label for="lblPreco">Preco</label>
					<select id="precos">
						<option value="1">Descontos</option>
						<option value="2">Lista de Natal</option>
						<option value="3">Liquidaçao</option>				
					</select>			
			</div>
		
			<div class="form-group list1">
					<label for="lblTipo">Tipo de produto</label>
					<select id="tipos">
						<option value="1">Padrão</option>
						<option value="2">Sazional</option>
						<option value="3">Mostruário</option>				
					</select>
			</div>
		
			<div class="form-group list1">
					<label for="lblMarca">Marca do produto</label>
					<select id="marcas">
						<option value="1">Adidas</option>
						<option value="2">Cocacola</option>
						<option value="3">Nike</option>				
					</select>
			</div>
	
        <button type="submit" class="btn btn-primary btn1" onclick="enviarForm()">Enviar</button>
		
    </form>
</div>

		

<script src="js/jquery-3.6.0.min.js"></script>
<script src="js/jquery.blockUI.js"></script>
<script src="js/bootstrap.min.js"></script>

<script>
	function enviarForm(){
		var formData = document.getElementById("form1");
		var vaaa = formData.pNome.value;
		var comboss = formData.precos.value;
		var comboss2 = formData.marcas.value;
		
		var obj = {		
			"url": "api/Cadastro/CadastrarProdutos",
			"method": "POST",
			"timeout": 0,
			"Content-Type": "application/json",
			"headers": { "Authorization": "Bearer " + $("#pToken").val() },
			"data": JSON.stringify({
				"Nome": "" + formData.pNome.value + "",
				"Codigo": "" + formData.pCodigo.value + "",
				"Descricao": "" + formData.pDescricao.value + "",
				"DataLancamento": "" + formData.pLancamento.value + "",			
				"Preco": "" + formData.pPreco.value + "",
				"PrecoId": "" + formData.precos.value + "",
				"TipoProdutoId": "" + formData.tipos.value + "",
				"MarcaId": "" + formData.marcas.value + ""
			}),
			"beforeSend": function() {
				$.blockUI({ message: '<h2><img src="img/ajax-loader.gif" />...</h2>' });
			},
			"success": function() {
				alert("sucesso no envio da requisição");
				$.unblockUI();
			},
			"error": function() {
				alert("aconteceram alguns erros no envio da requisição");
				$.unblockUI();
			}
		};
		
		$.ajax(obj).done(function (response){
			console.log(response);
		});
	}
</script>

<div id="loading" class="d-none">
    <h4 id="loadingContent"><img src="img/ajax-loader.gif"><span id="loadingContent2"></span></h4>
</div>

<script>
    $(document).ready(function () {
        $(".nav-item").click(function () {
            $.blockUI({ message: $("#loadingContent") });
            var p = "..carregando";
            var s = "";
            var i = 0;
            setInterval(function () {
                s = p.substring(i, p.length);
                document.getElementById("loadingContent2").innerHTML = s;
                i++;
                if (i > p.length) {
                    i = 0;
                    s = p;
                }
            }, 300);

            setTimeout(function () { $.unblockUI(); }, 15000);
        });
    })
</script>

</body>
</html>